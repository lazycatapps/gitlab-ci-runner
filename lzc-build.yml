# 整个文件中，可以通过 ${var} 的方式，使用 manifest 字段指定的文件定义的值

# buildscript
# - 可以为构建脚本的路径地址
# - 如果构建命令简单，也可以直接写 sh 的命令
# buildscript: sh build.sh

# manifest: 指定 lpk 包的 manifest.yml 文件路径
manifest: ./lzc-manifest.yml

# contentdir: 指定打包的内容，将会打包到 lpk 中
# contentdir: ./

# pkgout: lpk 包的输出路径
pkgout: ./

# icon 指定 lpk 包 icon 的路径路径，如果不指定将会警告
# icon 仅仅允许 png 后缀的文件
icon: ./icon.png

# devshell: 指定开发依赖的情况
# 用于本地开发和调试
devshell:
  # 开发路由配置
  routes:
    - /=http://127.0.0.1:8098

  # 开发依赖包 (Alpine apk 包名)
  dependencies:
    - go
    - git
    - curl
    - bash

  # 开发环境初始化脚本
  setupscript: |
    # 设置 Go 代理加速下载
    export GOPROXY=https://goproxy.cn,direct
    export GO111MODULE=on

    # 安装 GitLab Runner CLI
    curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
    chmod +x /usr/local/bin/gitlab-runner

    # 创建 GitLab Runner 用户
    adduser -D -h /home/gitlab-runner -s /bin/bash gitlab-runner || true

    echo "Development environment is ready!"
    echo "Run 'cd backend && go run main.go' to start the server"
